package com.timrobles.util {    import flash.display.Sprite;    import flash.events.Event;    import flash.events.TimerEvent;    import flash.system.System;    import flash.text.TextField;    import flash.text.TextFormat;    import flash.utils.Timer;    import flash.utils.getTimer;        /**     * @author timrobles     */    public class PerformanceUtil {        protected static var dialog : Sprite;        protected static var fpsCounter : uint = 0;        protected static var fpsTimer : Timer;                //--------------------------------------------------------------------------        //        //  Public Methods        //        //--------------------------------------------------------------------------                public static function getDialog( textColor : Number = 0xFFFFFF, bgColor : Number = 0x000000 ) : Sprite {    	            dialog = new Sprite();            var fps : TextField = new TextField();            fps.name = "fps";            var fmt : TextFormat = new TextFormat();            fmt.color = textColor;            fmt.font = "Arial";            fmt.size = 16;            fps.defaultTextFormat = fmt;            dialog.addChild( fps );            dialog.addEventListener( Event.ADDED_TO_STAGE, dialogAddedHandler );            dialog.addEventListener( Event.REMOVED_FROM_STAGE, dialogRemovedHandler );            return dialog;                    }        public static function getMemory() : Number {    	            return System.totalMemory;                    }                public static function getExecutionSpeed( scope : *, func : Function, args : Array = null, iterations : Number = 10000 ) : Number {                    var start : Number = getTimer();            for ( var i : uint = 0; i < iterations; i++ )                func.apply( scope, args );            return getTimer() - start;                    }                //--------------------------------------------------------------------------        //        //  Protected Methods        //        //--------------------------------------------------------------------------        protected static function dialogAddedHandler( event : Event ) : void {        	        	fpsTimer = new Timer( 1000 );        	fpsTimer.addEventListener( TimerEvent.TIMER, timerHandler );        	fpsTimer.start();        	dialog.addEventListener( Event.ENTER_FRAME, enterFrameHandler );        	        }                protected static function dialogRemovedHandler( event : Event ) : void {                    fpsTimer.stop();            fpsTimer.removeEventListener( TimerEvent.TIMER, timerHandler );	            dialog.removeEventListener( Event.ENTER_FRAME, enterFrameHandler );        	        }                protected static function timerHandler( timerEvent : TimerEvent ) : void {        	        	var fpsText : TextField = Sprite( dialog ).getChildByName( "fps" ) as TextField;            fpsText.text = "FPS: " + fpsCounter + "fps";        	fpsCounter = 0;        	        }                protected static function enterFrameHandler( event : Event ) : void {    		            fpsCounter++;                    }            }    }